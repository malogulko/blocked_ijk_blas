# What?

This code has 3 implementation of matrix multiplication algorithms:

* classic IJK matrix multiplication algorithm
* blocked(tiled) IJK matrix multiplication algorithm backed by cblas calls
* blocked(tiled) KIJ matrix multiplication algorithm backed by atlas(on linux only) calls

PLEASE NOTE: This code only supports matrices generated by itself, there is no serialization.

# How to use

## Building 

This is a regular CMake project, just follow the steps below:

```
~/.build$ cmake ..
-- The C compiler identification is GNU 9.2.1
-- Check for working C compiler: /usr/bin/cc
-- Check for working C compiler: /usr/bin/cc -- works
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Detecting C compile features
-- Detecting C compile features - done
-- Looking for pthread.h
-- Looking for pthread.h - found
-- Performing Test CMAKE_HAVE_LIBC_PTHREAD
-- Performing Test CMAKE_HAVE_LIBC_PTHREAD - Failed
-- Looking for pthread_create in pthreads
-- Looking for pthread_create in pthreads - not found
-- Looking for pthread_create in pthread
-- Looking for pthread_create in pthread - found
-- Found Threads: TRUE
-- Configuring done
-- Generating done
-- Build files have been written to: .build
~/.build$ make
Scanning dependencies of target blocked_kij_atlas
[ 16%] Building C object CMakeFiles/blocked_kij_atlas.dir/blocked_kij_atlas.c.o
[ 33%] Linking C executable blocked_kij_atlas
[ 33%] Built target blocked_kij_atlas
Scanning dependencies of target blocked_ijk_blas
[ 50%] Building C object CMakeFiles/blocked_ijk_blas.dir/blocked_ijk_blas.c.o
[ 66%] Linking C executable blocked_ijk_blas
[ 66%] Built target blocked_ijk_blas
Scanning dependencies of target ijk
[ 83%] Building C object CMakeFiles/ijk.dir/ijk.c.o
[100%] Linking C executable ijk
[100%] Built target ijk
```

## Running classic IJK multiplier

The binary expects only matrix size argument, see example below

```
~/.build$ ./ijk 100
100;3349
```

In this example, we try to multiply 100x100 square matrices, the output shows tat operation took 3349 **microseconds**.

## Running blocked multipliers

The binary expects two arguments:
1. Size of the matrix
1. Size of the block

Where the division of "Size of the matrix" by "Size of the block" must leave no remainder.

See an example run:

```
~/.build$ ./blocked_ijk_blas 100 10
100;10;496
```

Where we try to multiply two square 100x100 matrices with block size 10.
The output shows that this operation took 496 **microseconds**.
